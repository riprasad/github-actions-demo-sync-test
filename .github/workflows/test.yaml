name: Java CI with Maven
on:
  repository_dispatch:
    types: [test]
jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Maven Central Repository
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Display settings.xml
        run: |
          #echo "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KpZj" > private.key
          echo ${{ secrets.GPG_KEY }} > private.key
          cat private.key
          gpg --import private.key
          echo "<settings><servers><server><id>ossrh</id><username>${{ secrets.OSSRH_USERNAME }}</username><password>${{ secrets.OSSRH_TOKEN }}</password></server></servers><profiles><profile><id>ossrh</id><activation><activeByDefault>true</activeByDefault></activation><properties><gpg.keyname>${{ secrets.GPG_KEY_ID }}</gpg.keyname><gpg.passphrase>'${{ secrets.GPG_PASSPHRASE }}'</gpg.passphrase></properties></profile></profiles></settings>" > /home/runner/.m2/settings.xml
          cat /home/runner/.m2/settings.xml
      - name: Publish to the Maven Central Repository
        run: mvn -B deploy
        env:
          MAVEN_USERNAME: ${{ secrets.OSSRH_USERNAME }}
          MAVEN_PASSWORD: ${{ secrets.OSSRH_TOKEN }}
